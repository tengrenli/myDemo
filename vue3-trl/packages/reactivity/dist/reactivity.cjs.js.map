{"version":3,"file":"reactivity.cjs.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts"],"sourcesContent":["export const isObject = value => typeof value == 'object' && value !== null\nexport const extend = Object.assign\nexport const isArray = Array.isArray\nexport const isFunction = value => typeof value == 'function'\nexport const isNumber = value => typeof value == 'number'\nexport const isString = value => typeof value === 'string'\nexport const isIntegerKey = key => parseInt(key) + '' === key\n\nlet hasOwnpRroperty = Object.prototype.hasOwnProperty\nexport const hasOwn = (target, key) => hasOwnpRroperty.call(target, key)\n\nexport const hasChanged = (oldValue, value) => oldValue !== value\n","import { isArray, isIntegerKey } from '@vue/shared'\nimport { TriggerOrTypes } from './operatores'\n\nexport function effect (fn, options: any = {}) {\n  const effect = createReactiveEffect(fn, options)\n  if (!options.lazy) {\n    effect()\n  }\n  return effect\n}\nlet uid = 0\nlet activeEffect\nconst effectStack = []\nfunction createReactiveEffect (fn, options) {\n  const effect = function () {\n    if (!effectStack.includes(effect)) {\n      try {\n        effectStack.push(effect)\n        activeEffect = effect\n        return fn()\n      } finally {\n        effectStack.pop()\n        activeEffect = effectStack[effectStack.length - 1]\n      }\n    }\n  }\n  effect.id = uid++\n  effect._isEffect = true\n  effect.raw = fn\n  effect.options = options\n  return effect\n}\n\nexport const targetMap = new WeakMap()\nexport function track (target, type, key) {\n  // {}<WeakMap> => Map()\n  // console.log(activeEffect)\n  // console.log(target, type, key)\n  if (!activeEffect) {\n    // 不需要进行依赖收集\n    return\n  }\n  let depsMap = targetMap.get(target)\n  if (!depsMap) {\n    targetMap.set(target, (depsMap = new Map()))\n  }\n  let dep = depsMap.get(key)\n  if (!dep) {\n    depsMap.set(key, (dep = new Set()))\n  }\n  if (!dep.has(activeEffect)) {\n    dep.add(activeEffect)\n  }\n  console.log('WeakMap', targetMap)\n}\n\nexport function trigger (target, type, key?, newValue?, oldValue?) {\n  console.log(target, type, key, newValue, oldValue)\n  const effects = new Set()\n  const add = effectsToAdd => {\n    if (effectsToAdd) {\n      effectsToAdd.forEach(effect => effects.add(effect))\n    }\n  }\n  // 修改数组长度比较特殊\n  let depsMap = targetMap.get(target) // 没有进行过依赖收集\n  if (!depsMap) {\n    return\n  }\n\n  if (key === 'length' && isArray(target)) {\n    depsMap.forEach((dep, k) => {\n      // console.log('dep=>', dep, 'k==', k, 'newValu==', newValue)\n      if (key === 'length' || k > newValue) {\n        // k 为依赖中访问的数组索引，当修改数组length 属性时 也需要更新\n        // 如果更改的长度 小于收集的索引，那么这个索引也需要触发effect重新执行\n        add(dep)\n      }\n    })\n  } else {\n    // 可能是对象\n    if (key !== undefined) {\n      // 这里肯定是修改， 不能是新增\n      add(depsMap.get(key)) // 如果是新增\n    }\n    // 如果修改数组中的 某一个索引 怎么办？\n    switch (\n      type // 如果添加了一个索引就触发长度的更新\n    ) {\n      case TriggerOrTypes.ADD:\n        if (isArray(target) && isIntegerKey(key)) {\n          add(depsMap.get('length'))\n        }\n    }\n  }\n  effects.forEach((effect: any) => effect())\n}\n","import {\n  extend,\n  hasChanged,\n  hasOwn,\n  isArray,\n  isIntegerKey,\n  isObject\n} from '@vue/shared'\nimport { track, trigger } from './effect'\nimport { reactive, readonly } from './reactive'\nimport { TrackOpTypes, TriggerOrTypes } from './operatores'\nconst mutableHandlersGet = createGetter()\nconst mutableHandlersSet = createSetter()\n\nconst shallowReactiveHandlersGet = createGetter(false, true)\nconst shallowReactiveHandlersSet = createSetter(true)\n\nconst readonlyHandlersGet = createGetter(true) // 只读 非浅 不能设置新属性\n\nconst shallowReadonlyHandlersGet = createGetter(true, true)\n\nconst readOnlySet = {\n  set: (target, key) => {\n    console.warn(`set on key ${key} failed`)\n  }\n}\n// 响应\nexport const mutableHandlers = {\n  get: mutableHandlersGet,\n  set: mutableHandlersSet\n}\n\nexport const shallowReactiveHandlers = {\n  get: shallowReactiveHandlersGet,\n  set: shallowReactiveHandlersSet\n}\n\nexport const readonlyHandlers = extend(\n  {\n    get: readonlyHandlersGet\n  },\n  readOnlySet\n)\n\nexport const shallowReadonlyHandlers = extend(\n  {\n    get: shallowReadonlyHandlersGet\n  },\n  readOnlySet\n)\n\nfunction createGetter (isReadonly = false, shallow = false) {\n  return function (target, key, receiver) {\n    const res = Reflect.get(target, key, receiver)\n    if (!isReadonly) {\n      //收集依赖\n      console.log('依赖收集')\n      track(target, TrackOpTypes.Get, key)\n    }\n\n    if (shallow) {\n      return res\n    }\n\n    if (isObject(res)) {\n      return isReadonly ? readonly(res) : reactive(res)\n    }\n    return res\n  }\n}\nfunction createSetter (shallow = false) {\n  return function (target, key, value, receiver) {\n    const oldValue = target[key] // 获取老值\n    // 是否存在此属性\n    let hadKey =\n      isArray(target) && isIntegerKey(key)\n        ? Number(key) < target.length\n        : hasOwn(target, key)\n    const res = Reflect.set(target, key, value, receiver)\n    if (!hadKey) {\n      // 新增\n      trigger(target, TriggerOrTypes.ADD, key, value)\n    } else {\n      trigger(target, TriggerOrTypes.SET, key, value, oldValue)\n    }\n    // console.log('set', target, key, receiver)\n    // let dispatch = targetMap.get(target)\n    // let effect\n    // if (dispatch && (effect = dispatch.get(key)))\n    // {\n    //   console.log('3333', effect)\n    //   effect.forEach(item => item())\n    // }\n    return res\n  }\n}\n\n// reactivity readonly  shallowReactive  shallowReadOnly\n","import { isObject } from '@vue/shared'\nimport {\n  mutableHandlers,\n  shallowReactiveHandlers,\n  readonlyHandlers,\n  shallowReadonlyHandlers\n} from './baseHandlers'\nexport function reactive (target: any) {\n  return createReactiveObject(target, false, mutableHandlers)\n}\n\nexport function shallowReactive (target: any) {\n  return createReactiveObject(target, false, shallowReactiveHandlers)\n}\n\nexport function shallowReadonly (target: any) {\n  return createReactiveObject(target, true, shallowReadonlyHandlers)\n}\n\nexport function readonly (target: any) {\n  return createReactiveObject(target, true, readonlyHandlers)\n}\n\nconst reactiveMap = new WeakMap()\nconst readonlyMap = new WeakMap()\n/**\n * target 目标\n * isReadonly 是否为只读\n * baseHandler 代理函数\n */\nfunction createReactiveObject (target, isReadonly, baseHandler) {\n  if (!isObject(target)) {\n    // 非对象直接返回\n    return target\n  }\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\n\n  const isExitProxy = proxyMap.get(target) // 是否已代理\n  if (isExitProxy) {\n    return isExitProxy\n  }\n\n  const proxy = new Proxy(target, baseHandler)\n  proxyMap.set(target, proxy)\n  return proxy\n}\n","import { hasChanged, isArray, isObject } from '@vue/shared'\nimport { reactive } from '.'\nimport { track, trigger } from './effect'\nimport { TrackOpTypes, TriggerOrTypes } from './operatores'\n\nexport function ref (value) {\n  return createRef(value)\n}\nexport function shallowRef (value) {\n  return createRef(value, true)\n}\n\nconst covert = value => (isObject(value) ? reactive(value) : value)\nclass RefImpl {\n  public __v_isRef = true\n  public _value\n  constructor (public rawValue, public shallow) {\n    this._value = shallow ? rawValue : covert(rawValue)\n  }\n  // 类的属性访问器\n  get value () {\n    track(this, TrackOpTypes.Get, 'value')\n    return this._value\n  }\n\n  set value (newValue: any) {\n    if (hasChanged(newValue, this.rawValue)) {\n      this.rawValue = newValue\n      this._value = this.shallow ? newValue : covert(newValue)\n      trigger(this, TriggerOrTypes.SET, 'value', newValue)\n    }\n  }\n}\n\nfunction createRef (rawValue, shallow = false) {\n  return new RefImpl(rawValue, shallow)\n}\n\nclass ObjectRefImpl {\n  constructor (public target, public key) {}\n\n  get value () {\n    return this.target[this.key]\n  }\n\n  set value (newValue) {\n    this.target[this.key] = newValue\n  }\n}\n\nexport function toRef (target, key) {\n  return new ObjectRefImpl(target, key)\n}\n\nexport function toRefs(obj)\n{\n  debugger\n  const ret = isArray(obj) ? new Array(obj.length) : {}\n  for (let key in obj) {\n    ret[key] = toRef(obj, key)\n  }\n  return ret\n}\n"],"names":[],"mappings":"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"}